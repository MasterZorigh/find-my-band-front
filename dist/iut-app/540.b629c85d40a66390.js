"use strict";(self.webpackChunkiut_app=self.webpackChunkiut_app||[]).push([[540],{6540:(X,_,s)=>{s.r(_),s.d(_,{StudentModule:()=>V});var c=s(6895),h=s(9299),t=s(4650);var N=s(529);let g=(()=>{class n{getStudent(e){throw new Error("Method not implemented.")}constructor(e){this.http=e}get(){return this.http.get("http://localhost:3000/student")}delete(e){return this.http.delete("http://localhost:3000/student/"+e)}update(e){return this.http.put("http://localhost:3000/student/"+e.id,e)}create(e){return this.http.post("http://localhost:3000/student",e)}getById(e){return this.http.get("http://localhost:3000/student/"+e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(N.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var C=s(4859),v=s(7392);let A=(()=>{class n{constructor(){this.received=new t.vpe}ngOnInit(){this.received.emit(!0)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-card"]],inputs:{selectedStudent:"selectedStudent"},outputs:{received:"received"},decls:2,vars:3,template:function(e,i){1&e&&(t._uU(0),t.ALo(1,"json")),2&e&&t.Oqu(t.lcZ(1,1,i.selectedStudent))},dependencies:[c.Ts]}),n})(),x=(()=>{class n{constructor(e,i,a){this.route=e,this.studentService=i,this.location=a,this.studentId=+this.route.snapshot.paramMap.get("id")}ngOnInit(){this.studentId&&(this.student$=this.studentService.getById(this.studentId))}goBack(){this.location.back()}showReceivedValue(e){console.log(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.gz),t.Y36(g),t.Y36(c.Ye))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-details"]],decls:5,vars:3,consts:[["mat-raised-button","","color","primary",3,"click"],[3,"selectedStudent","received"]],template:function(e,i){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.goBack()}),t.TgZ(1,"mat-icon"),t._uU(2,"arrow_back"),t.qZA()(),t.TgZ(3,"app-student-card",1),t.NdJ("received",function(u){return i.showReceivedValue(u)}),t.ALo(4,"async"),t.qZA()),2&e&&(t.xp6(3),t.Q6J("selectedStudent",t.lcZ(4,1,i.student$)))},dependencies:[C.lW,v.Hw,A,c.Ov]}),n})();var T=s(7579),f=s(2722),F=s(1698),m=s(5412),r=s(4006),y=s(7009),S=s(9549),b=s(4144),B=s(4385),U=s(3238),Z=s(9602);function D(n,o){if(1&n&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let k=(()=>{class n{constructor(e,i,a,u,d){this.dialogRef=e,this.data=i,this.fb=a,this.studentService=u,this._snackBar=d,this.destroy$=new T.x,this.classes=["LP-DIM-FI","LP-DIM-APP"],this.studentForm=this.fb.group({id:[0,[r.kI.required]],firstName:["",[r.kI.required]],lastName:["",[r.kI.required]],class:["",[r.kI.required]],email:["",[r.kI.email]],dateOfBirth:["",[r.kI.required]]}),i.isCreateForm||this.setStudentForm(i.student)}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}setStudentForm(e){this.studentForm.setValue({id:e.id,firstName:e.firstName,lastName:e.lastName,class:e.class,email:e.email,dateOfBirth:e.dateOfBirth})}get title(){return this.data.isCreateForm?"Formulaire de cr\xe9ation":"Formulaire de modification"}get submitBtnName(){return this.data.isCreateForm?"Ajouter":"Modifier"}onSubmit(){this.studentForm.valid&&(this.studentForm.value.dateOfBirth=new Date(this.studentForm.value.dateOfBirth).toISOString(),this.data.isCreateForm?(this.studentForm.value.id=Date.now()+Math.random(),this.studentService.create(this.studentForm.value).pipe((0,f.R)(this.destroy$)).subscribe(e=>{this._snackBar.open(e,"",{duration:2e3,panelClass:["bg-success"]}),this.dialogRef.close(!0)})):this.studentService.update(this.studentForm.value).pipe((0,f.R)(this.destroy$)).subscribe(e=>{this._snackBar.open(e,"",{duration:2e3,panelClass:["bg-success"]}),this.dialogRef.close(!0)}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.so),t.Y36(m.WI),t.Y36(r.qu),t.Y36(g),t.Y36(y.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-form"]],decls:37,vars:7,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],[1,"form"],["appearance","outline"],["matInput","","formControlName","id","readonly",""],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["formControlName","class"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","email"],["appearance","fill"],["matInput","","formControlName","dateOfBirth",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],["align","end"],["mat-button","","type","button","mat-dialog-close",""],["mat-raised-button","","type","submit","cdkFocusInitial","","color","warn",3,"disabled"],[3,"value"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"identifiant"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Pr\xe9nom"),t.qZA(),t._UZ(11,"input",5),t.qZA(),t.TgZ(12,"mat-form-field",3)(13,"mat-label"),t._uU(14,"Nom"),t.qZA(),t._UZ(15,"input",6),t.qZA(),t.TgZ(16,"mat-form-field",3)(17,"mat-label"),t._uU(18,"Classe"),t.qZA(),t.TgZ(19,"mat-select",7),t.YNc(20,D,2,2,"mat-option",8),t.qZA()(),t.TgZ(21,"mat-form-field",3)(22,"mat-label"),t._uU(23,"Email"),t.qZA(),t._UZ(24,"input",9),t.qZA(),t.TgZ(25,"mat-form-field",10)(26,"mat-label"),t._uU(27,"Date de naissance"),t.qZA(),t._UZ(28,"input",11)(29,"mat-datepicker-toggle",12)(30,"mat-datepicker",null,13),t.qZA()(),t.TgZ(32,"mat-dialog-actions",14)(33,"button",15),t._uU(34,"Annuler"),t.qZA(),t.TgZ(35,"button",16),t._uU(36),t.qZA()()()),2&e){const a=t.MAs(31);t.xp6(1),t.Oqu(i.title),t.xp6(1),t.Q6J("formGroup",i.studentForm),t.xp6(18),t.Q6J("ngForOf",i.classes),t.xp6(8),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(6),t.Q6J("disabled",!i.studentForm.valid||!i.studentForm.dirty),t.xp6(1),t.Oqu(i.submitBtnName)}},dependencies:[c.sg,C.lW,m.ZT,m.uh,m.H8,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,S.KE,S.hX,S.R9,b.Nt,B.gD,U.ey,Z.Mq,Z.hl,Z.nW],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:50%}"]}),n})();var l=s(7155);function L(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1,"firstName"),t.qZA())}function O(n,o){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.firstName)}}function Y(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1,"lastName"),t.qZA())}function q(n,o){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.lastName)}}function I(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1,"class"),t.qZA())}function M(n,o){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.class)}}function w(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1,"email"),t.qZA())}function $(n,o){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.email)}}function J(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1,"update"),t.qZA())}function R(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",18),t.NdJ("click",function(){const u=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.openStudentForm(u))}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function Q(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1,"delete"),t.qZA())}function P(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",18),t.NdJ("click",function(a){const d=t.CHM(e).$implicit;return t.oxw().delete(d.id),t.KtG(a.stopPropagation())}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}function j(n,o){1&n&&t._UZ(0,"tr",19)}function H(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr",20),t.NdJ("click",function(){const u=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.showStudentDetails(u.id))}),t.qZA()}}const E=[{path:"",component:(()=>{class n{constructor(e,i,a,u){this.studentService=e,this.dialog=i,this._snackBar=a,this.router=u,this.destroy$=new T.x,this.displayedColumns=["firstName","lastName","class","email","update","delete"]}ngOnInit(){this.fetchData()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}fetchData(){this.students$=this.studentService.get()}openStudentForm(e){this.dialog.open(k,{height:"85%",width:"60%",data:{isCreateForm:!e,student:e||void 0}}).afterClosed().pipe((0,f.R)(this.destroy$)).subscribe(a=>{a&&this.fetchData()})}delete(e){this.dialog.open(F._,{data:{title:"Confirmation de suppression",message:"\xeates-vous s\xfbr de vouloir supprimer cet \xe9tudiant ?",typeMessage:"none",yesButtonVisible:!0,noButtonVisible:!0,cancelButtonVisible:!1,defaultButton:"No",yesButtonLabel:"Oui",noButtonLabel:"Non"}}).afterClosed().pipe((0,f.R)(this.destroy$)).subscribe(a=>{a&&this.studentService.delete(e).pipe((0,f.R)(this.destroy$)).subscribe(u=>{this._snackBar.open(u,"",{duration:2e3,panelClass:["bg-success"]}),this.fetchData()})})}showStudentDetails(e){this.router.navigate(["/students/"+e])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g),t.Y36(m.uw),t.Y36(y.ux),t.Y36(h.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-list"]],decls:30,vars:5,consts:[[1,"container"],[1,"flex-grow-1","p-1"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","firstName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["matColumnDef","class"],["matColumnDef","email"],["matColumnDef","update"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"btn-holder"],["mat-fab","","color","warn",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Liste des \xe9tudiants"),t.qZA(),t.TgZ(3,"div",1)(4,"table",2),t.ALo(5,"async"),t.ynx(6,3),t.YNc(7,L,2,0,"th",4),t.YNc(8,O,2,1,"td",5),t.BQk(),t.ynx(9,6),t.YNc(10,Y,2,0,"th",4),t.YNc(11,q,2,1,"td",5),t.BQk(),t.ynx(12,7),t.YNc(13,I,2,0,"th",4),t.YNc(14,M,2,1,"td",5),t.BQk(),t.ynx(15,8),t.YNc(16,w,2,0,"th",4),t.YNc(17,$,2,1,"td",5),t.BQk(),t.ynx(18,9),t.YNc(19,J,2,0,"th",4),t.YNc(20,R,3,0,"td",10),t.BQk(),t.ynx(21,11),t.YNc(22,Q,2,0,"th",4),t.YNc(23,P,3,0,"td",10),t.BQk(),t.YNc(24,j,1,0,"tr",12),t.YNc(25,H,1,0,"tr",13),t.qZA()(),t.TgZ(26,"div",14)(27,"button",15),t.NdJ("click",function(){return i.openStudentForm()}),t.TgZ(28,"mat-icon"),t._uU(29,"add"),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("dataSource",t.lcZ(5,3,i.students$)),t.xp6(20),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[C.cs,v.Hw,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,c.Ov],styles:[".clickable[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:100%}.container[_ngcontent-%COMP%]   .btn-holder[_ngcontent-%COMP%]{justify-content:flex-end;display:flex;padding:1%}"]}),n})()},{path:":id",component:x}];let z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(E),h.Bz]}),n})();var G=s(4466);let V=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[g],imports:[c.ez,z,G.m]}),n})()}}]);